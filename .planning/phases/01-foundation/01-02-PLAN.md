---
phase: 01-foundation
plan: 02
type: execute
depends_on: ["01-01"]
files_modified: [manifest.json, src/main/java/com/hyvote/votelistener/HytaleVoteListener.java]
---

<objective>
Create plugin manifest.json and main plugin class with lifecycle methods.

Purpose: Establish the plugin entry point that the Hytale server loads, with proper lifecycle handling.
Output: Loadable plugin with manifest descriptor and main class implementing onEnable/onDisable.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
.planning/phases/01-foundation/01-02-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

**Hytale plugin patterns (from hytale-votifier exploration):**
- manifest.json at project root with Group, Name, Version, Main, Dependencies
- Main class extends PluginBase
- Lifecycle: setup() → start() → shutdown()
- Constructor takes PluginInit parameter
- getType() returns PluginType.PLUGIN

**Key classes to use:**
- com.hypixel.hytale.server.core.plugin.PluginBase
- com.hypixel.hytale.server.core.plugin.PluginInit
- com.hypixel.hytale.common.plugin.PluginType
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create manifest.json plugin descriptor</name>
  <files>manifest.json</files>
  <action>
Create manifest.json at project root with:
```json
{
  "Group": "HyVote",
  "Name": "HytaleVoteListener",
  "Version": "1.0.0",
  "Description": "Vote reward plugin for Hytale servers - delivers configurable rewards for votes",
  "Authors": [
    {
      "Name": "HyVote Team"
    }
  ],
  "Website": "https://github.com/Hyvote/hytale-votelistener",
  "Main": "com.hyvote.votelistener.HytaleVoteListener",
  "ServerVersion": ">=1.0.0",
  "Dependencies": {
    "HytaleVotifier": ">=1.0.0"
  }
}
```

Key fields:
- Main: fully qualified class name of main plugin class
- Dependencies: declares HytaleVotifier as required dependency
  </action>
  <verify>cat manifest.json | jq . validates JSON structure</verify>
  <done>manifest.json exists with valid JSON, correct Main class path, HytaleVotifier dependency declared</done>
</task>

<task type="auto">
  <name>Task 2: Create main plugin class with lifecycle methods</name>
  <files>src/main/java/com/hyvote/votelistener/HytaleVoteListener.java</files>
  <action>
Create HytaleVoteListener.java extending PluginBase with:

1. Package declaration: com.hyvote.votelistener
2. Import statements for PluginBase, PluginInit, PluginType
3. Constructor accepting PluginInit, calling super(pluginInit)
4. setup() method - placeholder for config loading (logs "Setting up HytaleVoteListener...")
5. start() method - placeholder for listener registration (logs "HytaleVoteListener v{version} enabled")
6. shutdown() method - placeholder for cleanup (logs "HytaleVoteListener disabled")
7. getType() method returning PluginType.PLUGIN

Use getLogger() for all logging. Get version from getManifest().getVersion() in start().

This is a skeleton - actual functionality added in Phase 2+.
  </action>
  <verify>mvn compile succeeds without errors</verify>
  <done>Main class compiles, extends PluginBase, has all lifecycle methods, logs on enable/disable</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `mvn compile` succeeds
- [ ] `mvn package` produces JAR in target/
- [ ] manifest.json is valid JSON with correct structure
- [ ] Main class path in manifest matches actual class location
</verification>

<success_criteria>

- manifest.json valid and complete
- Main plugin class compiles
- All lifecycle methods present (setup, start, shutdown, getType)
- `mvn package` produces working JAR
- Phase 1 complete
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
